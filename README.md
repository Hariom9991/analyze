# Data Processing with CI/CD and GitHub Pages\n\nThis project demonstrates a comprehensive workflow for automated data processing, code quality enforcement, and result publication using GitHub Actions and GitHub Pages.\n\n## Project Overview\n\nThe core of this project revolves around processing data from an Excel file (`data.xlsx`), transforming it using a Python script (`execute.py`), and publishing the final processed data as a JSON file (`result.json`) via GitHub Pages. The entire process is automated through a GitHub Actions workflow, ensuring code quality with Ruff and reliable deployment.\n\n## Files and Structure\n\n*   `execute.py`: The Python script responsible for reading `data.csv`, performing data transformations, and outputting `result.json`.\n*   `data.xlsx`: The original Excel data file (not committed, converted to `data.csv`).\n*   `data.csv`: The CSV version of `data.xlsx`, used by `execute.py`.\n*   `.github/workflows/ci.yml`: The GitHub Actions workflow definition.\n*   `index.html`: A simple, responsive HTML page built with Tailwind CSS to introduce the project.\n*   `README.md`: This documentation.\n*   `LICENSE`: The MIT License for the project.\n\n## `execute.py` - Python Data Processing Script\n\nThe `execute.py` script reads `data.csv`, processes its contents using Pandas, and outputs the final structured data as `result.json`.\n\n**Key Enhancements/Fixes Applied:**\n\nThe script was analyzed and enhanced to address a non-trivial error related to data robustness. Specifically, it now includes logic to:\n1.  **Standardize Column Names**: Strips leading/trailing whitespace and converts column names to a consistent lowercase format to prevent `KeyError` issues from inconsistent naming.\n2.  **Robust Type Coercion**: Ensures numerical columns are correctly cast (e.g., `pd.to_numeric`) with error handling, converting non-numeric entries into `NaN`. This prevents `TypeError` during aggregations.\n3.  **Graceful Missing Data Handling**: `NaN` values resulting from type coercion or original data are handled (e.g., filled with a default or dropped) before final processing to ensure reliable calculations and JSON output.\n\nThis ensures the script runs reliably on Python 3.11+ with Pandas 2.3, even with minor inconsistencies in the input data.\n\n## `data.csv` - Data Source\n\nThe `data.xlsx` file was converted into `data.csv` to serve as the primary input for the `execute.py` script. This conversion is typically part of the initial setup or can be integrated into the CI pipeline if the source remains `xlsx`.\n\n## GitHub Actions Workflow (`.github/workflows/ci.yml`)\n\nA GitHub Actions push workflow is configured to automate the following steps:\n\n```yaml\nname: CI/CD Pipeline\n\non:\n  push:\n    branches:\n      - main\n  workflow_dispatch:\n\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n\n    permissions:\n      contents: write\n      pages: write\n      id-token: write\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Set up Python 3.11\n        uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n          cache: 'pip'\n\n      - name: Install dependencies\n        run: |\n          python -m pip install --upgrade pip\n          pip install pandas==2.3.0 ruff\n\n      - name: Convert data.xlsx to data.csv (if not already done)\n        run: |\n          python -c \"import pandas as pd; pd.read_excel('data.xlsx').to_csv('data.csv', index=False)\"\n        # This step ensures data.csv is always present from the original data.xlsx\n        # if the original xlsx is committed, or if it's implicitly part of the build.\n        # In this specific context, data.csv would be committed directly.\n\n      - name: Run Ruff (Linter)\n        run: ruff check . --output-format=github\n\n      - name: Execute data processing script\n        run: python execute.py > result.json\n\n      - name: Setup Pages\n        uses: actions/configure-pages@v4\n\n      - name: Upload result.json artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: 'result.json' # Publish result.json\n\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\n```\n\n### Workflow Details:\n\n*   **Triggers**: Runs on `push` to the `main` branch and can be triggered manually (`workflow_dispatch`).\n*   **Permissions**: Configured for writing repository content (though not directly used for committing in this pipeline), publishing pages, and OIDC token for secure deployments.\n*   **Python Setup**: Uses Python 3.11.\n*   **Dependencies**: Installs `pandas==2.3.0` and `ruff`.\n*   **Data Conversion**: Includes a step to ensure `data.csv` is generated from `data.xlsx` within the CI environment, guaranteeing `execute.py` has its input. (Note: `data.csv` is also committed directly as per instructions).\n*   **Ruff Linter**: Runs Ruff to check Python code for style and common errors, reporting directly in the CI log.\n*   **Script Execution**: Executes `execute.py` and redirects its output to `result.json`.\n*   **GitHub Pages Deployment**:\n    *   `actions/configure-pages@v4` sets up the Pages environment.\n    *   `actions/upload-pages-artifact@v3` uploads `result.json` as an artifact specifically for GitHub Pages.\n    *   `actions/deploy-pages@v4` publishes the uploaded artifact to GitHub Pages.\n\n## How to Run Locally\n\n1.  **Clone the repository**:\n    ```bash\n    git clone https://github.com/your-username/your-repo-name.git\n    cd your-repo-name\n    ```\n2.  **Set up a Python virtual environment** (recommended):\n    ```bash\n    python -m venv venv\n    source venv/bin/activate # On Windows: .venv\\Scripts\\activate\n    ```\n3.  **Install dependencies**:\n    ```bash\n    pip install pandas==2.3.0 ruff\n    ```\n4.  **Convert `data.xlsx` to `data.csv`**:\n    (This step assumes `data.xlsx` is present. In the final project, `data.csv` is directly committed.)\n    ```bash\n    python -c \"import pandas as pd; pd.read_excel('data.xlsx').to_csv('data.csv', index=False)\"\n    ```\n5.  **Run the script**:\n    ```bash\n    python execute.py > result.json\n    ```\n    This will generate `result.json` in your current directory.\n6.  **Run Ruff**:\n    ```bash\n    ruff check .\n    ```\n\n## Accessing `result.json` via GitHub Pages\n\nOnce the CI/CD pipeline runs successfully on the `main` branch, `result.json` will be published and accessible via your GitHub Pages URL. Typically, this would be:\n\n`https://your-username.github.io/your-repo-name/result.json`\n\nCheck your repository's "Settings > Pages" section for the exact URL.\n\n---